@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewBag.Title = "QR Code cho các bàn ăn";
    var scheme = HttpContextAccessor.HttpContext?.Request?.Scheme ?? "http";
    var host = HttpContextAccessor.HttpContext?.Request?.Host.ToString() ?? "localhost:5041";
}

<h2>Danh sách QR Code bàn ăn</h2>

@for (int i = 1; i <= 5; i++) // có thể thay bằng số bàn thật từ DB
{
    var token = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes($"table-{i}"));
    var url = $"{scheme}://{host}/Order/Index?token={token}";

    <div style="margin-bottom: 30px;">
        <h3>Bàn số @i</h3>
        <object type="image/svg+xml" data="/Qr/Generate?tableId=@i" width="220" height="220"></object>
        <p>Link gọi món: <a href="@url">@url</a></p>
        <hr />
    </div>
}
